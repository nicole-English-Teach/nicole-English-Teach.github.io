import*as pdfjsLib from"/assets/js/pdfjs/pdf.mjs";var url=(canvas=document.getElementById("the-canvas")).dataset.pdfUrl;pdfjsLib.GlobalWorkerOptions.workerSrc="/assets/js/pdfjs/pdf.worker.mjs";var canvas,pdfDoc=null,pageNum=1,pageRendering=!1,pageNumPending=null,scale=.8,ctx=(canvas=document.getElementById("the-canvas")).getContext("2d");function renderPage(e){pageRendering=!0,pdfDoc.getPage(e).then((function(e){var n=e.getViewport({scale:scale});canvas.height=n.height,canvas.width=n.width;var t={canvasContext:ctx,viewport:n};e.render(t).promise.then((function(){pageRendering=!1,null!==pageNumPending&&(renderPage(pageNumPending),pageNumPending=null)}))})),document.getElementById("page_num").textContent=e}function queueRenderPage(e){pageRendering?pageNumPending=e:renderPage(e)}function onPrevPage(){pageNum<=1||queueRenderPage(--pageNum)}function onNextPage(){pageNum>=pdfDoc.numPages||queueRenderPage(++pageNum)}function isElementInViewport(e){const n=e.getBoundingClientRect();return n.top>=0&&n.left>=0&&n.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&n.right<=(window.innerWidth||document.documentElement.clientWidth)}document.getElementById("prev").addEventListener("click",onPrevPage),document.getElementById("next").addEventListener("click",onNextPage),pdfjsLib.getDocument(url).promise.then((function(e){pdfDoc=e,document.getElementById("page_count").textContent=pdfDoc.numPages,renderPage(pageNum)})),document.addEventListener("keydown",(function(e){isElementInViewport(canvas)&&("ArrowLeft"===e.key?onPrevPage():"ArrowRight"===e.key&&onNextPage())}));